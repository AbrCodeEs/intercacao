---
import type { CollectionEntry } from 'astro:content';
import { Image } from 'astro:assets';
import bg from '@/images/home/lienzo-bg.webp';

import Rating from '@/components/ui/Rating';
type Props = CollectionEntry<'template'>['data'];

const { generalInformation, traceability } = Astro.props;
---

<div
  id="section-home"
  class="flex h-auto w-full flex-col flex-wrap bg-gray-200 md:flex-row lg:flex-row xl:flex-row"
>
  <div
    class={`relative size-auto flex-1 overflow-hidden bg-neutral-700 md:w-auto lg:w-auto xl:w-auto bg-repeat ${generalInformation.cocoa?.scale ? 'xl:p-30 lg:p-30 md:p-20 p-12.5' : 'p-0'}`}
    style={`background-image: url(${bg.src})`}
  >
    <Image
      inferSize={true}
      loading="eager"
      class="object-start relative h-full w-full object-contain"
      src={generalInformation.mainImage.src}
      alt={generalInformation.mainImage.alt}
    />

    {
      traceability?.certificates && (
        <div class="absolute inset-x-0 bottom-10 z-10 flex flex-row items-center justify-start gap-5 px-8 md:gap-8 lg:gap-10 xl:gap-15">
          {traceability?.certificates.map((certificate: any) => (
            <img src={certificate.src} alt="Certificado de origen" class="w-10" />
          ))}
        </div>
      )
    }
  </div>
  <div
    class={`w-full flex-none ${generalInformation.cocoa ? 'bg-primary' : 'bg-neutral-700'}  px-15 py-10 text-white md:w-lg md:px-10 lg:w-lg lg:px-10 xl:w-lg xl:px-20`}
  >
    <div class="flex flex-col gap-7 text-base font-thin">
      <!-- Sección de Rating -->
      <div>
        {
          generalInformation.cocoa && (
            <div class="hidden flex-col gap-2 pb-5 md:flex lg:flex xl:flex">
              <h1 class="text-center text-xl font-medium tracking-[8px] uppercase md:text-2xl lg:text-2xl xl:text-2xl">
                {generalInformation.cocoa.title}
              </h1>
              <h2 class="text-center text-xl font-bold tracking-[7px] uppercase md:text-3xl lg:text-3xl xl:text-3xl">
                {generalInformation.cocoa.subtitle}
              </h2>
              <h3 class="text-md text-center tracking-[7px] uppercase">
                {generalInformation.cocoa.header}
              </h3>
              <div class={`h-2 w-full pt-2 ${generalInformation.cocoa.color}`} />
            </div>
          )
        }

        <div class="flex flex-row gap-0.5">
          <p class="flex w-full flex-wrap justify-between gap-2">
            <span class="uppercase">{generalInformation.title}</span>
            <span class="mb-2 flex-grow border-b border-dashed border-gray-300"></span>
            <b>{generalInformation.rating.value}</b>
          </p>
          <Rating value={Number(generalInformation.rating.value)} />
        </div>
      </div>

      <!-- Secciones dinámicas -->
      {
        generalInformation.sections.map((section: any) => (
          <div class="flex flex-col gap-0.5">
            {section.items.map((item: any) => (
              <p class="flex flex-wrap justify-between gap-2">
                <span>{item.label}</span>
                <span class="mb-2 flex-grow border-b border-dashed border-gray-300" />
                <b>{item.value}</b>
              </p>
            ))}
          </div>
        ))
      }
    </div>
  </div>
</div>
